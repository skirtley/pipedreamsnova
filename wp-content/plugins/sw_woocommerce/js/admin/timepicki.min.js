!function(i){i.fn.timepicki=function(t){var e={format_output:function(i,t,e){return n.show_meridian?((i=Math.min(Math.max(parseInt(i),1),12))<10&&(i="0"+i),(t=Math.min(Math.max(parseInt(t),0),59))<10&&(t="0"+t),i+":"+t+" "+e):((i=Math.min(Math.max(parseInt(i),0),23))<10&&(i="0"+i),(t=Math.min(Math.max(parseInt(t),0),59))<10&&(t="0"+t),i+":"+t)},increase_direction:"up",custom_classes:"",min_hour_value:1,max_hour_value:12,show_meridian:!0,step_size_hours:"1",step_size_minutes:"1",overflow_minutes:!1,disable_keyboard_mobile:!1,reset:!1,on_change:null,input_writable:!1},n=i.extend({},e,t);return this.each(function(){var t=i(this);t.outerHeight();i(t).wrap("<div class='time_pick'>");var e=i(this).parents(".time_pick"),a="down"===n.increase_direction?"<div class='prev action-prev'></div>":"<div class='prev action-next'></div>",s="down"===n.increase_direction?"<div class='next action-next'></div>":"<div class='next action-prev'></div>",r=i("<div class='timepicker_wrap "+n.custom_classes+"'><div class='time'>"+a+"<div class='ti_tx'><input type='text' class='timepicki-input'"+(n.disable_keyboard_mobile?"readonly":"")+"></div>"+s+"</div><div class='mins'>"+a+"<div class='mi_tx'><input type='text' class='timepicki-input'"+(n.disable_keyboard_mobile?"readonly":"")+"></div>"+s+"</div>");n.show_meridian&&r.append("<div class='meridian'>"+a+"<div class='mer_tx'><input type='text' class='timepicki-input' readonly></div>"+s+"</div>"),n.reset&&i("<a class='reset_time'>x</a>").insertAfter(t),e.append(r);var l=i(this).parent().find(".timepicker_wrap"),m=(l.find("div"),e.find("input"));function o(t){return i.contains(e[0],t[0])||e.is(t)}function u(i,e){var a=l.find(".ti_tx input").val(),s=l.find(".mi_tx input").val(),r="";n.show_meridian&&(r=l.find(".mer_tx input").val()),0===a.length||0===s.length||n.show_meridian&&0===r.length||(t.attr("data-timepicki-tim",a),t.attr("data-timepicki-mini",s),n.show_meridian?(t.attr("data-timepicki-meri",r),t.val(n.format_output(a,s,r))):t.val(n.format_output(a,s))),null!==n.on_change&&n.on_change(t[0]),e&&d()}function c(){if(function(i){var e,a,s,r;t.is("[data-timepicki-tim]")?(a=Number(t.attr("data-timepicki-tim")),s=Number(t.attr("data-timepicki-mini")),n.show_meridian&&(r=t.attr("data-timepicki-meri"))):"object"==typeof i?(a=Number(i[0]),s=Number(i[1]),n.show_meridian&&(r=i[2])):(e=new Date,a=e.getHours(),s=e.getMinutes(),r="AM",n.show_meridian&&(0==a?a=12:12==a?r="PM":a>12&&(a-=12,r="PM")));a<10?l.find(".ti_tx input").val("0"+a):l.find(".ti_tx input").val(a);s<10?l.find(".mi_tx input").val("0"+s):l.find(".mi_tx input").val(s);n.show_meridian&&(r<10?l.find(".mer_tx input").val("0"+r):l.find(".mer_tx input").val(r))}(n.start_time),l.fadeIn(),!n.input_writable){var e=l.find("input:visible").first();e.focus()}var a=function(n){if(9===n.which&&n.shiftKey){e.off("keydown",a);var s=i(":input:visible:not(.timepicki-input)"),r=s.index(t);s.get(r-1).focus()}};e.on("keydown",a)}function d(){l.fadeOut()}function p(i,t){var e=Number(l.find(".time .ti_tx input").val()),a=Number(n.min_hour_value),s=Number(n.max_hour_value),r=Number(n.step_size_hours);if(i&&i.hasClass("action-next")||"next"===t)if(e+r>s){var m=a;m=m<10?"0"+m:String(m),l.find(".time .ti_tx input").val(m)}else(e+=r)<10&&(e="0"+e),l.find(".time .ti_tx input").val(e);else if(i&&i.hasClass("action-prev")||"prev"===t){if(e-r<Number(n.min_hour_value)){var o=s;o=o<10?"0"+o:String(o),l.find(".time .ti_tx input").val(o)}else(e-=r)<10&&(e="0"+e),l.find(".time .ti_tx input").val(e)}}function v(i,t){var e=Number(l.find(".mins .mi_tx input").val()),a=Number(n.step_size_minutes);i&&i.hasClass("action-next")||"next"===t?e+a>59?(l.find(".mins .mi_tx input").val("00"),n.overflow_minutes&&p(null,"next")):(e+=a)<10?l.find(".mins .mi_tx input").val("0"+e):l.find(".mins .mi_tx input").val(e):(i&&i.hasClass("action-prev")||"prev"===t)&&(e-a<=-1?(l.find(".mins .mi_tx input").val(60-a),n.overflow_minutes&&p(null,"prev")):(e-=a)<10?l.find(".mins .mi_tx input").val("0"+e):l.find(".mins .mi_tx input").val(e))}function _(i,t){var e,n="meridian";e=l.find("."+n+" .mer_tx input").val(),i&&i.hasClass("action-next")||"next"===t?"AM"==e?l.find("."+n+" .mer_tx input").val("PM"):l.find("."+n+" .mer_tx input").val("AM"):(i&&i.hasClass("action-prev")||"prev"===t)&&("AM"==e?l.find("."+n+" .mer_tx input").val("PM"):l.find("."+n+" .mer_tx input").val("AM"))}i(".reset_time").on("click",function(i){t.val(""),d()}),i(".timepicki-input").keydown(function(t){if(13==t.keyCode)return t.preventDefault(),u(),void d();var e=i(this).parent().parent(),a=i(this),s=a.val();done=!1,setTimeout(function(){done||(function(){var i=/^\d+$/.test(a.val()),r=""===a.val();if(e.hasClass("time"))if(i){var l=n.show_meridian?Math.min(Math.max(parseInt(a.val()),1),12):Math.min(Math.max(parseInt(a.val()),0),23);a.val(l)}else r||a.val(s);else if(e.hasClass("mins"))if(i){var m=Math.min(Math.max(parseInt(a.val()),0),59);a.val(m)}else r||a.val(s);else e.hasClass("meridian")&&t.preventDefault()}(),done=!0)},0)}),i(document).on("click",function(e){if(!i(e.target).is(l)&&"block"==l.css("display")&&!i(e.target).is(i(".reset_time")))if(i(e.target).is(t)){l.css({bottom:"30px",left:"0px"}),c()}else u(e,!o(i(e.target)))}),t.on("focus",c),m.on("focus",function(){var e=i(this);e.is(t)||e.select()}),m.on("keydown",function(t){var e,a=i(this);38===t.which?e="down"===n.increase_direction?"prev":"next":40===t.which&&(e="down"===n.increase_direction?"next":"prev"),a.closest(".timepicker_wrap .time").length?p(null,e):a.closest(".timepicker_wrap .mins").length?v(null,e):a.closest(".timepicker_wrap .meridian").length&&n.show_meridian&&_(null,e)}),m.on("blur",function(){setTimeout(function(){var t=i(document.activeElement);t.is(":input")&&!o(t)&&(u(),d())},0)});var f=l.find(".action-next"),h=l.find(".action-prev");i(h).add(f).on("click",function(){var t=i(this);"time"==t.parent().attr("class")?p(t):"mins"==t.parent().attr("class")?v(t):n.show_meridian&&_(t)})})},i("#woocommerce-product-data").on("click",".sale_schedule",function(){var t=i(this).closest("div, table");return i(this).hide(),t.find(".cancel_sale_schedule").show(),t.find(".sale_price_time_fields").show(),!1}),i("#woocommerce-product-data").on("click",".cancel_sale_schedule",function(){var t=i(this).closest("div, table");return i(this).hide(),t.find(".sale_schedule").show(),t.find(".sale_price_time_fields").hide(),t.find(".sale_price_time_fields").find("input").val(""),!1}),i(".short_time").timepicki({show_meridian:!1,min_hour_value:0,max_hour_value:23,step_size_minutes:1,overflow_minutes:!0,reset:!0})}(jQuery);